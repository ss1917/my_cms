<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>任务列表</title>
    <link rel="Shortcut Icon" href="/favicon.ico"/>
    <!-- load css -->
    <link rel="stylesheet" type="text/css" href="../../../common/frame/layui/css/layui.css" media="all">
    <link rel="stylesheet" type="text/css" href="../../../common/css/gobal.css" media="all">
    <link rel="stylesheet" type="text/css" href="../../../common/css/animate.css" media="all">
    <link rel="stylesheet" type="text/css" href="../../css/common.css" media="all">
</head>
</head>
<body>
<div class="layui-fluid larry-wrapper">
    <div class="layui-row  animated bounceIn">
        <div class="layui-col-lg12 layui-col-md12 layui-col-sm12 layui-col-xs12">
            <fieldset class="layui-elem-field layui-field-title site-title">
                <legend><a name="color-design">任务列表</a></legend>
            </fieldset>

            <div class="layui-tab layui-tab-brief">
                <ul class="layui-tab-title">
                    <li class="layui-this">当前列表</li>
                    <li>历史任务</li>
                </ul>
                <div class="layui-tab-content">
                    <div class="layui-tab-item layui-show user-tables">
                        <table id="tasklistTables" lay-filter="tasklistTables"></table>
                    </div>
                    <div class="layui-tab-item">
                        <table id="histTables" lay-filter="histTables"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 加载js文件 -->
<script type="text/html" id="statusTpl">
    {{#  if(d.status == "0" ){ }}
    <span class="layui-badge layui-bg-gray">新建</span>
    {{# } else if(d.status == "1" )  { }}
    <span class="layui-badge" style="background-color:#708090">等待</span>
    {{# } else if(d.status == "2" )  { }}
    <span class="layui-badge layui-bg-blue">运行</span>
    {{# } else if(d.status == "3" )  { }}
    <span class="layui-badge" style="background-color:#5FB878">完成</span>
    {{# } else if(d.status == "4" )  { }}
    <span class="layui-badge layui-bg-orange">错误</span>
    {{# } else if(d.status == "5" )  { }}
    <span class="layui-badge layui-bg-cyan">手动</span>
    {{# } else { }}
    <span class="layui-badge">{{ d.status }}</span>
    {{#  } }}
</script>
<script type="text/html" id="scheduleTpl">
    {{#  if(d.schedule == "OK" ){ }}
    <span class="layui-badge" style="background-color:#5FB878">完成</span>
    {{# } else { }}
    <span class="layui-badge layui-bg-orange">错误</span>
    {{#  } }}
</script>
<script type="text/html" id="checkTpl">
    <a href="/static/backstage/templates/task/task_check.html?list_id={{ d.list_id }}"
       class="layui-table-link">{{ d.task_name }}</a>
</script>
<script type="text/html" id="taskbar">
    {{#  if(d.schedule != "OK" ){ }}
    {{#  if(d.executor == "" ){ }}
    <a class="layui-btn layui-btn-mini layui-btn-warm" lay-event="take_over">接手</a>
    {{# } else { }}
    <a class="layui-btn layui-btn-mini layui-btn-warm" lay-event="task_release">释放</a>
    {{#  if(d.executor == d.username ){ }}
    <a class="layui-btn layui-btn-mini layui-btn-danger" lay-event="list_stop">终止</a>
    {{#  } }}
    {{#  } }}
    {{#  } }}
</script>
<script type="text/html" id="publishbar">
    <a href="/static/backstage/templates/task/task_details.html?list_id={{ d.list_id }}"
       class="layui-table-link">详情</a>
</script>
<script type="text/javascript" src="../../../common/frame/layui/layui.js"></script>
<script type="text/javascript" src="../../js/common.js"></script>
<script type="text/javascript" src="../../js/task_list.js"></script>
</body>
</html>